---
name: wikilinks-signature-editing
description: "Wikilinks Signature Editing Hook"
type: hook
created:
  2025-11-06T00:00:00.000Z
  
updated:
  2025-11-06T00:00:00.000Z
  
tags: ["hook", "behavior-reference"]
category: behavior-reference
---

# Wikilinks Signature Editing Hook

Behavior reference for Cursor - automatic addition of wikilink signatures when editing work documents manually.

---

## What is this Hook?

This hook documents the expected behavior that Cursor must apply when manually editing work documents (`workspaces/`) to automatically add wikilink signatures indicating the origin of inserted content.

**Purpose:** Automatically track the origin of content inserted in work documents, whether generated by LLM, copied from other files, or extracted from external sources.

**Context:** When editing documents manually in Cursor, content may be:
- Generated by LLM (via Cursor's AI features)
- Copied from other files
- Integrated from multiple sources
- Extracted from external sources (Google Sheets, Docs, etc.)

This hook ensures that all such content is properly attributed with wikilink signatures.

---

## Expected Behavior

### 1. Activation of the Hook

Cursor must activate wikilinks-signature-editing behavior when:

- âœ… Editing a document in `workspaces/` and inserting content generated by LLM
- âœ… Copying content from another file into a work document
- âœ… Integrating content from multiple sources
- âœ… User explicitly requests "agregar firma" or "trackear origen"
- âœ… After inserting content that should be attributed

**Activation condition:**

```markdown
IF (editing workspaces/**/*.md) AND (content inserted is generated/copied/integrated) OR
   (user requests "firma" OR "trackear" OR "origen") OR
   (content inserted from external source)
THEN activate wikilinks-signature-editing behavior
```

### 2. Signature Generation Process

When wikilinks-signature-editing behavior is activated, Cursor must:

#### Step 1: Identify Content Origin

Determine the origin of the inserted content:

1. **LLM Generated:**
   - Content generated by Cursor's AI features
   - Content generated by OpenAI API calls
   - Identify the model used (gpt-4o, gpt-4-turbo, etc.)

2. **LLM Integrated:**
   - Content integrated from multiple sources using LLM
   - Identify all source files
   - Identify the model used

3. **Copied:**
   - Content copied from another file
   - Identify source file and line range (if available)

4. **Scraped/Extracted:**
   - Content extracted from external sources
   - Identify source (Google Sheet, Google Doc, etc.)

#### Step 2: Generate Appropriate Signature

Generate signature based on content origin:

1. **For LLM Generated:**
   ```markdown
   *Generado con gpt-4o a partir de [[workspaces/[workspace]/ðŸš€ active-projects/[project-name]/archivo.md]]*
   ```

2. **For LLM Integrated:**
   ```markdown
   *Integrado con gpt-5 a partir de [[archivo1.md]], [[archivo2.md]]*
   ```

3. **For Copied:**
   ```markdown
   *Copiado de [[archivo.md]], lÃ­neas 10-25*
   ```

4. **For Scraped:**
   ```markdown
   *ExtraÃ­do de Google Sheet: [ID]*
   ```

#### Step 3: Insert Signature

Insert signature in appropriate location:

1. **Position determination:**
   - For new content: Insert at the end of inserted block
   - For integrated content: Insert at the end of integrated section
   - For copied content: Insert immediately after copied block
   - Use `insertSignature()` utility with `'auto'` position

2. **Avoid duplication:**
   - Check if signature already exists before inserting
   - Don't add multiple signatures for same content block

#### Step 4: Track Modification

Track the modification:

1. **Call `trackFileModification()`:**
   - Script path: Current file being edited
   - Target file: Document being modified
   - Source files: Files referenced in signature
   - Operation: Type of operation (llm-generated, copied, integrated, scraped)

2. **Include metadata:**
   - Model used (if LLM)
   - Source files
   - Line ranges (if copied)
   - Timestamp

#### Step 5: Update Backlinks

Update backlinks automatically:

1. **Call `updateBacklinksFromContent()`:**
   - Scan document for wikilinks
   - Create backlinks in referenced files
   - Update existing backlinks if context changed

### 3. Signature Format Rules

#### LLM Generated Content

**Format:**
```markdown
*Generado con [modelo] a partir de [[archivo1.md]], [[archivo2.md]]*
```

**Rules:**
- Always include model name
- Include all source files as wikilinks
- Use relative paths from project root
- Place at end of generated content block

#### LLM Integrated Content

**Format:**
```markdown
*Integrado con [modelo] a partir de [[archivo1.md]], [[archivo2.md]]*
```

**Rules:**
- Use "Integrado" instead of "Generado"
- Include all source files
- Place at end of integrated section

#### Copied Content

**Format:**
```markdown
*Copiado de [[archivo.md]], lÃ­neas [start]-[end]*
```

**Rules:**
- Include source file as wikilink
- Include line range if available
- Place immediately after copied block

#### Scraped Content

**Format:**
```markdown
*ExtraÃ­do de [source-type]: [identifier]*
```

**Rules:**
- Identify source type (Google Sheet, Google Doc, etc.)
- Include identifier (ID, URL, etc.)
- Place at end of extracted content

### 4. Integration with Other Hooks

This hook integrates with:

1. **backlinks-discovery:**
   - Automatically create backlinks when signatures are added
   - Track relationships between documents

2. **post-tool-use-tracker:**
   - Track which documents were modified
   - Maintain context of editing operations

3. **dendrita-communication:**
   - Log signature additions to timeline
   - Track content origin tracking

### 5. Special Cases

#### Multiple Signatures

If content is inserted from multiple sources:

1. **Consolidate when possible:**
   - If all from same source type, use single signature
   - If different sources, use multiple signatures

2. **Order:**
   - Most recent first
   - Group by source type

#### Signature Updates

If content is modified after signature is added:

1. **Update signature if source changed:**
   - Update source files list
   - Update timestamp if significant change

2. **Preserve original signature:**
   - Don't remove original signature
   - Add new signature if source changed significantly

#### Emoji File Names

When handling files with emojis:

1. **Use emoji version in wikilinks:**
   - Always link to emoji version
   - System handles backup automatically

2. **Resolve paths correctly:**
   - Handle both emoji and backup versions
   - Use correct path in signature

---

## Notes for Cursor

1. **Always generate signatures:**
   - Don't skip signature generation
   - Even for small content blocks
   - Track all content origins

2. **Use appropriate format:**
   - Match signature format to content origin
   - Include all relevant information
   - Use wikilinks for file references

3. **Be non-intrusive:**
   - Add signatures automatically
   - Don't interrupt user workflow
   - Make signatures visible but not distracting

4. **Track modifications:**
   - Always call `trackFileModification()`
   - Include complete metadata
   - Update tracking records

5. **Update backlinks:**
   - Automatically update backlinks
   - Create new backlinks when needed
   - Maintain bidirectional links

6. **Handle edge cases:**
   - Emoji file names
   - Relative path resolution
   - Multiple signatures
   - Signature updates

---

## Examples

### Example 1: LLM Generated Content

**User action:** User asks Cursor to generate a summary of a project.

**Cursor behavior:**
1. Generate content using LLM
2. Identify source files (project documents)
3. Generate signature: `*Generado con gpt-4o a partir de [[workspaces/[workspace]/ðŸš€ active-projects/[project-name]/master-plan.md]]*`
4. Insert signature at end of generated content
5. Track modification
6. Update backlinks

### Example 2: Copied Content

**User action:** User copies content from another file.

**Cursor behavior:**
1. Detect copied content
2. Identify source file and line range
3. Generate signature: `*Copiado de [[workspaces/[workspace]/ðŸš€ active-projects/[project-name]/current-context.md]], lÃ­neas 10-25*`
4. Insert signature after copied block
5. Track modification
6. Update backlinks

### Example 3: Integrated Content

**User action:** User asks Cursor to integrate information from multiple sources.

**Cursor behavior:**
1. Integrate content using LLM
2. Identify all source files
3. Generate signature: `*Integrado con gpt-5 a partir de [[archivo1.md]], [[archivo2.md]]*`
4. Insert signature at end of integrated section
5. Track modification
6. Update backlinks

---

## Integration with Scripts

This hook complements the behavior implemented in scripts:

- Scripts automatically add signatures when generating content
- Manual editing should follow the same pattern
- Both use the same utilities (`wikilink-signature.ts`, `file-tracking.ts`, `backlinks.ts`)
- Both create backlinks automatically

**Consistency:** Manual editing and script execution should produce the same signature format and tracking behavior.

